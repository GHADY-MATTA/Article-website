<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="/website-wallet\client\assets\homestyle.css">
    

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>

<body>
    <div class="profile-css">
    <div class="nomargin"></div>
    <div class="container-profile">
        <div class="info elegant-box">
            <h1 class="big-title">User Profile</h1>
            <h2 class="medium-title" id="greeting">Welcome, Loading...</h2>

            <div class="profile-body small-title">
                <p><strong>Username:</strong> <span id="username"><span class="loader"></span></span></p>
                <p><strong>Email:</strong> <span id="email"><span class="loader"></span></span></p>
                <p><strong>Phone:</strong> <span id="phone"><span class="loader"></span></span></p>
                <p><strong>Address:</strong> <span id="address"><span class="loader"></span></span></p>
                <!-- Added balance field here -->
                <p><strong>Balance:</strong> <span id="balance"><span class="loader"></span></span></p>
            </div>
            </div>

            <div class="elegant-box"><button class="input-btn" id="showP2PNumber">Show P2P Number</button>
                <div id="p2pnumber_display"></div>
            </div>

            <button class="back-btn elegant-box" id="logout">Logout</button>
            <div class="elegant-box">
                <h1>Gemini API Integration</h1>
                <input class="input-css" type="text" id="inputText" placeholder="Enter your text here" /><br></br>
                <button class="back-btn" onclick="sendToGemini()">Send</button>
                
                <div id="response">
                    <p><strong>Response:</strong></p>
                    <p id="responseText"></p>
                </div>


            </div>
            <!-- ------ tiers and badges here ----------------  -->
            <h1>Select Your Monthly Tier</h1>
            <div class="tiers elegant-box">
                <!-- SEFACTORY 33 FSW\website-wallet\server(api)\php\saveTier.php -->
                <form action="/website-wallet/server(api)/php/saveTier.php" method="post">
                    <div class="badge brown-badge">
                        <input type="radio" id="tier_brown" name="tier" value="brown" required>
                        <label for="tier_brown">
                            <i class="fas fa-medal"></i>
                            <p>Brown 3$</p>
                        </label>
                    </div><br></br>

                    <div class="badge silver-badge">
                        <input type="radio" id="tier_silver" name="tier" value="silver">
                        <label for="tier_silver">
                            <i class="fas fa-medal"></i>
                            <p>Silver 6$</p>
                        </label>
                    </div><br></br>

                    <div class="badge gold-badge">
                        <input type="radio" id="tier_gold" name="tier" value="gold">
                        <label for="tier_gold">
                            <i class="fas fa-medal"></i>
                            <p>Gold 9$</p>
                        </label>
                    </div><br></br>

                    <button class="input-btn" type="submit">Submit Tier</button>
                </form>
            </div>

            <!-- ----------------- deposit / withdrawal ----------------  -->
            <div class="deposit elegant-box">
            <form action="/website-wallet/server(api)/php/transaction.php" method="post">
                <label class="big-title" for="deposit">Deposit</label>

                <!-- Dynamically insert the logged-in user ID -->
                <input  type="hidden" name="user_id" value="<?php echo $_SESSION['user_id']; ?>">
                <input class="input-css" type="number" id="deposit" name="amount" placeholder="Enter amount" min="0.01" step="0.01"
                    required><br></br>
                <input type="hidden" name="transaction_type" value="deposit">
                <p><input type="submit" class="back-btn" name="deposit-submit" value="Deposit"></p>
            </form>
            </div>
            <div class="Withdrawal elegant-box">

            <form action="/website-wallet/server(api)/php/transaction.php" method="post">
                <label class="big-title" for="withdrawal">Withdrawal</label>
                <!-- Dynamically insert the logged-in user ID -->
                <input type="hidden" name="user_id" value="<?php echo $_SESSION['user_id']; ?>">
                <input type="number" id="withdrawal" name="amount" placeholder="Enter amount" min="0.01" step="0.01"
                    required><br></br>
                <input type="hidden" name="transaction_type" value="withdrawal">
                <p><input class="back-btn" type="submit" name="withdrawal-submit" value="Withdraw"></p>
            </form>
            </div>





            <!-- ----------------- deposit / withdrawal ----------------  -->

            <!-- -----------------------P2P----------------------------  -->

            <!-- -----------------------P2P----------------------------  -->
            <div class="p2p elegant-box">
            <form action="/website-wallet/server(api)/php/p2p_transaction.php" method="post">
                <label class="big-title" for="send_to_user">Send To (P2P Number)</label>
                <input class="input-css" type="text" id="send_to_user" name="send_to_user" placeholder="Enter recipient P2P number"
                    required> <br></br>

                <label class="big-title" for="amount">Amount</label>
                <input class="input-css" type="number" id="amount" name="amount" placeholder="Enter amount" min="0.01" step="0.01"
                    required> <br></br>

                <input type="hidden" name="transaction_type" value="p2p">

                <p><input class="back-btn" type="submit" name="p2p-submit" value="Send Money"></p>
            </form>
            </div>
            <!-- -----------------------edit profile----------------------------  -->
             
            <div class="jquery-btn10 elegant-box">
                <form id="editProfileForm">
                    <label class="big-title elegant-box" for="username">Username:</label>
                    <input class="input-css" type="text" id="username" name="username" value="" required>

                    <label class="big-title elegant-box" for="email">Email:</label>
                    <input class="input-css" type="email" id="email" name="email" value="" required>

                    <label class="big-title elegant-box" for="address">Address:</label>
                    <input class="input-css" type="text" id="address" name="address" value="" required>

                    <label class="big-title elegant-box" for="phone">Phone Number:</label>
                    <input class="input-css" type="text" id="phone" name="phone" value="" required>

                    <label class="big-title elegant-box" for="password">Password:</label><br>
                    <input class="input-css" type="password" id="password" name="password" value="" required>
                    <br></br>
                    <button class="input-btn" type="button" onclick="updateProfile()">Update Profile</button>
                </form> <br></br>
                <div id="response"></div> <!-- Make sure this element exists in the HTML -->


            </div>
            </div>
            <script src="/website-wallet/client/assets/script/giminibot.js"></script>


            <script src="/website-wallet/client/assets/script/showp2p.js"></script>
            <script src="/website-wallet/client/assets/script/profile.js"></script>
            <script src="/website-wallet/server(api)/php/models/editProfile.js"></script>


</body>

</html>